# Unity #

# HowTo #
1. [Make a life slider](https://youtu.be/cXefXSD2SM0?t=90)

Add Script Templates https://github.com/UnityCommunity/UnityLibrary/tree/master/ScriptTemplates

find /Applications/Unity/Hub/Editor -name ScriptTemplates -exec cp /Users/johnmcgarey/Documents/Unity/_assets/ScriptTemplates/*.cs.txt {} \;


# Competitors #
* Love
* Godot
* Unreal (of course)
* Construct
* Game Maker Studio - Community: toxic.  I even tried to argue in favor of it 'it cant be that bad' and I was assured that it was.  I own one version of this in humblebundle.
* Amazons
* RPG Maker - I own VX Ace and XP and a bunch of tile packs in humble bundle.

## About Game Engines ## 
About game engine or programming language maturity

- From Reddit
  - When you google a problem in Godot and it only shows the official documentation, you know it's not ready for serious development.
  - On the other, google something for Unity or Unreal, and someone has had that problem before and there's a good chance that it's solved.
- 1. Google gives you almost nothing or results from another language
- 2. Google gives you results from the official documentation
- 3. Google gives you results from people who have had the problem before but haven’t had much discussion or activity
- 4. Google gives results from people who have had the problems and the community has solved them 
- 5. They’ve solved them and given easy applicable solutions 


## How to do binary in Csharp in Unity ##


## VR ##
- [Microsoft Mixed Reality Toolkit](https://github.com/Microsoft/MixedRealityToolkit-Unity) this says its compatible with vive and oculus too and windows mr.  it says it provides an in editor.  updated just a few hours ago.  Requires unity 2018.4   Heres a [tutorial on using the mixed reality toolkit](https://docs.microsoft.com/en-us/windows/mixed-reality/develop/unity/unity-development-overview?tabs=mrtk%2Carr%2Chl2)
- [XRTK Core](https://github.com/XRTK/XRTK-Core) this is a pretty big deal updated 20 days ago and has support for windowsmr but not vive or steamvr but does have oculus 
- [LightweightVR](https://github.com/Spatial-Cinematics/Lightweight-VR) 1year old so not fresh not many updates.  I like what its saying though just open the 
- [TButt](https://github.com/turbobutton/tbutt-vr) I absolutely love this its super lightweight way to do VR in Unity. and its already in production and its MIT open source AND its lightweight, AND the setup is really straightforward and well documented and clear.  I'm going to be so much more comfortable with this PLUS theres a discord with the devs.  Only disadvantage: It hasn't been updated for a year and a half [TButt Discord51](https://discord.com/invite/5VRBTjD) 
- [VRTK](https://github.com/ExtendRealityLtd/VRTK) is MIT Licensed but isnt lightweight its super overengineered, but it sure does a lot of shit!  I think highly of it though.


## More Obscure Competitors ##
* [JLud2D](https://github.com/rafael-esper/JLud2D) this looks like a great tiled compatible way to make Sega Master System and Genesis style games.  Updated May 2018
* Defold
* [Superpowers](http://superpowers-html5.com/index.en.html)
* Clickteam Fusion - I own multimedia fusion 2 in humble bundle (Windows only for running, pay to export to mac)
* Phaser.io
* Pygame and its competitor for python ... (forgot name)
* Raylib - C/C++ Code with no external dependencies.
* Arcade is a python library for 2d arcade games - open source updated 4 days ago.
* [Piston](https://www.piston.rs/) - A modular game engine written in rust updated 1month ago. 


## More specific competitors ##
* OpenBOR [OpenBOR Community](http://www.chronocrash.com/forum/) for making double dragon games and shooters and more.  Active development.  
* Frogatto has a [built in level editor](https://frogatto.com/developer-info/) for making platform games
* [Solarus](https://www.solarus-games.org/) Lightweight foss Action RPG engine.  Written in C++ games in LUA specifically for 16bit action rpgs like Zelda.  Updates in last weeks.
* [Lionheart](https://www.b3dgs.com/v7/page.php?lang=en&section=lionengine) an engine dedicated to games like Lionheart or other Amiga style 2d games.  
* Mario
	* [The Secret Chronicles of Dr.M](https://secretchronicles.org/en/) a mario clone but with completely original IP and a built in level editor and a scripting language.
	* [SuperTux](https://www.supertux.org/) updated 1hr ago
	* [Mario-Game](https://github.com/jazzyjester/Mario-Game) plus level editor
* [Rockbot](https://github.com/protoman/rockbot) megaman engine which is pretty flexible. 
* [Dust Racing](http://juzzlin.github.io/DustRacing2D/index.html) Micro Machines or Super cars game engine with qt based level editor for new tracks.  
* Minecraft all three updated recently
	* [MineTest](https://www.minetest.net/) an open source voxel game engine.  Make your own game or play one of their many games.
	* [Terasology](https://terasology.org/) Minecraft clone voxel game open source.
	* [Veloren](https://veloren.net/) 
	* [Hematite](https://github.com/PistonDevelopers/hematite) written in rust with the piston game engine.
* [Xonotic](https://xonotic.org/) a 3d game engine primarily for multiplayer gaming
* [Portal](https://glportal.de/) Free portal clone recently updated
* [Nightdive Kex](https://www.nightdivestudios.com/kex/) For early 90s FPS games this is custom made for those games.  Apparently been around for a while even though I haven't heard of it before today (12/3/2019) System Shock, Blood:Fresh Supply, Turok, Turok 2 all made in this.  XboxOne, Switch, Windows, Mac, Linux, PS4 platform support.  "Great for creating simple/retro themed games without the constraint over bloated engine features"  Unfortunately I can't figure out how to download it or buy it or try it at all.  
* [Cube Sauerbraten](http://cubeengine.com/wiki/Main_Page) This FPS game engine lets you edit maps from inside the game.  You can make  your own maps and mods, but I dont know if you can sell them, but you certainly can't sell this engine as a standalone game without replacing all of the textures maps and sounds from scratch yourself.  YOu can even do cooperative in game editing.  

## Investigate ##
* Skyline (drag and drop)
* 001 Game Creator (PC only, templates available)
* Cry Engine
* PlayCanvas (Unity’s lightweight younger sibling)
* GameGuru (The FPS Template master - easiest for 3D, Windows only - made by appgamekit creators))
* Stencyl (has templates (kits), and good for simple games, subscription based?) 
* AppGameKit (expensive-ish ($20-80 + asset bundles), very fast compilation cross platform)
* GameSalad ($12-25/month subscription)
* Buildbox ($2-300/yr sub, with the templates this is probably the fastest of all to make a simple commercial game)
* Urho3D - free lightweight, cross platform 2d, 3d C++ MIT License.  
* Duality2d - Promising Open source, clean understandable code in .net, life editing, introduce game logic via plugins, hot reload resources & plugins, updated recently.


# Want #
The same kind of resources Coppercube gives you out of the box in Unity + Some unreal features.
* AI Enemies (patrol, chase, attack in a radius) models and code so you can drag and drop them into a scene which shoot projectiles and Ragdoll when killed
* 

# Starting Point #
1. Title Screen
2. Scoring
3. Game Over Screen
4. High Score Screen (optional) (could be part of title screen)
5. Rotator
6. InGameText fields
7. Quick Level Loader

## Starting Point Assets ##



# Improvements to QOL #
* [TODO Manager](https://assetstore.unity.com/packages/tools/utilities/todo-manager-142600 - $0 Searches your project for TODOs in the folders you want and with the formats you want also tells you whether its assigned or not (based on whether you put a username in the todo) and I like how it does all of this with a profile scriptable object so you can just copy that SO to other projects to use the exact same settings or copy someone elses settings effortlessly.  You just launch the window from the window menu. The ignore folders feature works well.  You can select todos by assignment.  It also seems to work just fine from the plugins folder (so its not tied to cluttering up the top level of the assets folder like some assets are) Only one thing makes me not wholly recommend this: When you click on the todo it doesn't open the file or even select it to be opened.  I fully assumed it would open the file right to the TODO line in visual studio (or whatever editor you are using) but it doesn't at least in Unity 2019.2.8f1.  At least it will show you the full path if you check an option box so you can find the file in just a few steps.   Its got great PDF documentation actually with clear screenshots and descriptions of everything.  Its also fast at scanning your files and it only weighs about 56KB.
* Scene Heirarchies
* History Selection - [$20 History & Favorites Ultimate](https://assetstore.unity.com/packages/tools/utilities/history-favorites-ultimate-126302) or 
	* [$6 History Inspector](https://assetstore.unity.com/packages/tools/utilities/history-inspector-44279) which looks like it works with prefabs or 
	* [$0 Simple Selection History Lite](https://assetstore.unity.com/packages/tools/utilities/simple-selection-history-lite-130881) which I got and its pretty good and does what it advertises (I left a positive review for this one its just so simple and good) or 
	* [$0 History and Working Set Window](https://assetstore.unity.com/packages/tools/utilities/history-and-working-set-window-60202) which lets you drag prefabs in and you can even drag and drop from the window into your public inspector fields.  It was last updated Jul 2018 and it shows because there are a 8 warnings that show up when it is imported in Unity 2019.2.8f1.  Just select it from the window menu and the window pops up.  Its really just a simple favorites window and it works well.  It has a feature that some other similar tools don't have: You can drag from the favorites window into any inspector field which is a really smooth timesaver as opposed to clicking it and then having it be selected and then dragging from there.  you can put folders on there too.  There is one thing to know if you want to move the folder (I like to keep these kinds of things in a plugins folder) then you have to change a line of code.  Easy.  Its got some great shortcuts in its help menu too, you can easily drag and drop to reorder the items in the menu or even move items to the bottom by dragging to the right (which I think is a very clever and useful gesture).  Dragging to the left doesn't seem to work for some reason but is supposed to send to the top.  Middle click removes the item and ctrl+double click opens files in the windows explorer (thats a great shortcut).  All of this in about 30k. 
		* Comments: Drag left doesn't work in 2019.2.8f1.  Shift + click on something like a folder generates a red error but should probably just be silent and do nothing (warning at worst).  Control double click works but only after you ctrl double click twice.   
* Possibly could use [Choose Your Own Inspector](https://assetstore.unity.com/packages/tools/utilities/choose-your-own-inspector-73126) which lets you add components from many different objects to a custom window and there are more
* In Unity Script Editors - This can dramatically speed up workflows.  $40 [Script Inspector 3](https://assetstore.unity.com/packages/tools/visual-scripting/script-inspector-3-3535) then Hidden in this cool [$15 power inspector - Oct 25 2019](https://assetstore.unity.com/packages/tools/utilities/power-inspector-140430) package is an in-unity editor.
* Easily add a button to execute a routine in your script with [$10 Inspector Gadgets](https://assetstore.unity.com/packages/tools/gui/inspector-gadgets-pro-83013) or with the [$0 Button Inspector](https://assetstore.unity.com/packages/tools/utilities/buttoninspector-72858) which I tried and it works great.  You just have to write two lines of code for every button you want so its extremely easy to use.  It isn't trying to be a complicated inspector replacement which means it just does one thing and it does that well: Effortlessly add a button to the inspector that calls one of your public methods.  Previously if you know the code like I do adding a button was a several minute boilerplate editor code job, and theres still a place for using editor scripts to make your own custom inspector when you want to do more interesting things than just call a method, but when all you want to do is call a method then theres nothing simpler than this. Its perfect.  I confirmed that it works perfectly in Unity 2019.2.8f1.  
* Snapping To surfaces while dragging in the center using translate hold shift and control (command on Mac) to snap to the intersection of any collider and for Rotations: hold same combo to rotate the object towards a point on the surface of any collider which is a good way to make objects orient towards one another
* Roslyn 11-7-2020 I'm trying to install [This Roslyn](https://github.com/Duffy-y/roslyn-unity) to hopefully get some hot reload going which I think would be bad ass.  I'm having trouble though because of the installs I have.  It was last used in 2019.3.0f6 and I dont have any 2019.3 and my 2019.4 didnt work.   If that doesnt work (or maybe even if it does) I'm going to try this other [Unity Roslyn](https://github.com/mwahnish/Unity-Roslyn) Ok for the duffy one thre aer two problems: it requires odin inspector, but even when you comment those things out (not hard) omg it uses the n word in a comment.  I cant believe it.  I wrote issues for those and while the sample scene runs I dont know how to do anything in it.  Looking up some roslyn learn documents console.writeline is supposed to work but it isnt for me.  This one has zero support and is pretty broken.  I give up and have already spent too long.  Next 
	* this second one from mwahnish installed flawlessly in 2018.3.4f1 with no errors.  I have no idea how to use this or what it does.  I guess it gives me a way to call some api to compile some code or something?  There is no docs and its over my head atm.  Moving on.



# Investigate #
* .CSX files and Roslyn (with https://assetstore.unity.com/packages/tools/visual-scripting/ucodeeditor-117349)
* Scriptcs.net
* Building C# from within visual studio for instant running of unit tests
* [Unity Runtime Inspector](https://github.com/yasirkula/UnityRuntimeInspector) - This seems really cool allowing you to change a bunch of values from within the game world.  This seems like it could be almost universally useful. [Here is a youtube video](https://www.youtube.com/watch?v=bpy4yAUHNps) about how to use it.  Here it is on [Unity Asset Store](https://assetstore.unity.com/packages/tools/gui/runtime-inspector-hierarchy-111349?aid=1011lQ8D&cid=1100l6EZxMsF&utm_source=aff)  [Tweakable Member](https://gist.github.com/Danik/85d4a7b6d344e69c7579) does something very similar but you just add that tag to your properties.
* [Giles](https://github.com/Unity-Technologies/giles) lets you adjust settings during runtime but its a level editor also that saves data as JSON



# Skills #
Part of the point of developing your skills is so you can focus on the problem space.  if you're trying to make a pacman game you don't want to have to spend your time trying to solve problems with scene loading or editor scripts or displaying text to the user.  These are things that most or all games have to deal with and problems which have been solved before.  YOu want to be able to make your game out of problems that you can solve without them dragging your attention away from the unique problem you are trying to solve.  You want to make a game mostly out of problems that have been solved already and a little bit out of problems that you have to solve uniquely for this game.  

* Scene heirarchies - Preload your character and camera in one scene and make it dont destroy on load then load the rest of your levels via other destroyable scenes.  Also in other scenes if theres no player then load the main scene.  Also you could load the other scenes super smooth without disrupting gameplay much at all.
* Probuilder
* UI fields that can be easily changed from scripts
* TextMeshPro
* Extra Primatives
* Tween Assets
* UV Free Shaders
* Vertex Shaders
* Motion Shaders (like grass for a lively world (brackeys has a video on a grass shader but I think there is one in the unity standard assets)
* Delegates rather than messages (more work to do on this one)
* Extension Methods
* Editor Scripts (able to make one from nothing in 2 minutes with no mental complexity)


# Level Design #
1. [Surface snapping](https://unitycoder.com/blog/2015/11/18/surface-snapping-in-editor/) Shift command when in center mode and transforming from the center gizmo Snap to any collider
2. [Rotation Pointing](https://unitycoder.com/blog/2015/11/18/surface-snapping-in-editor/) point an object at any point on any other collider by using the rotate tool in pivot mode and then starting to rotate any axis or all 3 and press shift cmd.
3. [MAST - Modular Asset Staging Tool](https://assetstore.unity.com/packages/tools/level-design/mast-modular-asset-staging-tool-154939) Free - for the objects setup with their components, this lets you: see the available objects, easily select them, easily put them in the scene, and snap to a grid, super easy rotation, raise and lower the grid and a robust randomizer for varying props.
4. [Level Building Tools](https://assetstore.unity.com/packages/tools/utilities/level-building-tools-93315) $8 lets you randomize position, rotation, scale, stack objects, clone objects to the mouse, snap to surfaces like terrains.  Select a few prefabs and then click and it will select them randomly and align them to the surface normal to create variation.  
5. [Smart Snap Buttons for Inspector](https://assetstore.unity.com/packages/templates/systems/smart-snap-buttons-for-inspector-106586) Free - for any given selected object enable surface snapping, snap axes, it looks really good.  
6. Use [Game Builder](https://store.steampowered.com/app/929860/Game_Builder/) engine


# How to Rename a Script #
This is a very tricky business.  I just had success with the following but don't do this without a full backup and a way to figure out if it all worked.  You might want to list what objects use the script so you can check them afterwards.

1. In Unity project view in assets folder right click on the script and go to rename and rename it. 
2. Wait for things to resolve (~5sec?) but at this point your script components on your objects will seem to be broken. 
3. Open the script in Visual Studio
4. In the script in Visual Studio change the name of the class.

I haven't tested it with a 'refactor' style rename since this class was small and not referred to.   Update: That refactor rename did work in a small case

# Cinemachine #
## Camera Confiner ##
1. Add the extension at the bottom of the cinemachine virtual camera (working example in Akashenen 2d character controller)
2. Setup a kinematic 2d rigidbody on an empty game object (call it camera confiner) with a composite collider 2d with polygons geometry type, then add colliders (polygon, box, whatever) to make the shape you want.  
3. Attach the 'camera confiner' gameobject to the bounding shape 2d in the confiner script on the virtual camera.  Confine screen edges, and damping 0.

# Quirks #
* Custom Editors work great with some quirks: 
	1. you have to set dirty if you change something in the editor.  Sometimes.  If you don't you may get unexpected results.  
	2. Sometimes you have to put ExecuteInEditMode and sometimes you don't.  
	3.  I feel like a custom button that just calls a function should be a one liner header embedded in the code, but the boilerplate isnt too bad for making a custom editor.  it only takes 2 minutes for a simple one.
* Broadcast message works but if you run it in edit mode and send a message to a class that isn't set to ExecuteInEditMode you get an error reported but generally everything actually still works!?!  You won't be able to set the receiver's information as dirty though.  In my case it worked even with the error and still saved the received data since the receiver was brand new in the heirarchy and new = dirty.
* Renaming a script shouldn't be rocket science - I saw one reply suggesting "In a perfect world you will name your scripts correctly to begin with" which is the lamest cop-out in history and completely ignores reality, and shits on the process of refactoring.
* There is no good reason that you have to get a script involved to make an animator flip a sprite.  Its so common that virtually every 2d dev does this daily and has to write code to do it.  There should be a feature built into the animator that flips the sprite based on a boolean.  There are two that seem related: 1. flipx in the renderer (which you can't access from the animator without a script) and mirror in the animation state (which doesnt flip the sprite).  Otherwise you can just effectively double your frames of animation that you have to create (wont take long) and maintain (makes the relevant folders in your asset folder less readable and easily understandable and all sprites harder to find)

# Editors #

Visual Studio Code
This is some [tutorial for making it work great with VSCode](https://code.visualstudio.com/docs/other/unity)
Here's [How to Debug](https://github.com/Unity-Technologies/vscode-unity-debug)

# Distributing Packages #

https://github.com/shadowmint/unity-package-template/blob/master/docs/npm.md

https://openupm.com


# Making a 2D Platformer in Unity #

* Using the [Free Sunnyland Asset Pack](https://assetstore.unity.com/packages/2d/characters/sunny-land-103349)
* Started with Starting Point 2
	* First problems are because of where that left off and how different I want it now
	* High score list seems to be in the way all the time
	* Build settings were messed up 
* When I cleared out the level the player was falling into nothing so I put a little wooden platform below the player (arranged the arrow above the player)
* going back and forth on whether to incorporate this awesome [2D Platformer Controller](https://github.com/akashenen/2d-platformer-controller).  I'm sure I would have an advanced controller up and running faster if I did, however I like the idea of continuing to build my own.  I think I'll do my own for now by basically porting my other one.
* Its not too hard implementing the interfaces and if I do that then I can just fill in the basic movement and it shoudl be good.  Should only take an hour (we will see about that though)
* I think I got all of the interfaces including teleporting in under an hour (of actual work) Now I can just add the movement 
* So Ive got the controls working a bit but now I need to animate the sprite.  Maybe I can use some of that enemy sprite class I made before
* I feel like I should generalize all of my controllers to work with 2d or 3d.  Theyre remarkably similar. 
* I had to adjust the circle collider so the sprite was more touching the ground.
* Theres significant tearing between the tiles on the tilemap.  I know you can like slightly overlap them but there must be abetter way (maybe not)
* Movement is just jerky at fast speeds (probably an update vs fixed update issue)
* Don't like that the player keeps going up almmost as long as the button is held.
* Also now that I moved the sprite to a child object of hte collider now the teleport has an error or something 
* Spent a day on and off getting grounded to work.  Turns out that probably the whole time it was an issue of the rays casting into the player and therefore always being true
* In the process of solving that I just dont like how the jump is working so I'm going to put the jump fix into the main jump mechanic somehow and fix it
* Put a speed limit on how fast you can fall and fly and a speed limit on how fast you can run.
* Now I feel like I totally broke the entire jump mechanic.  
* Ok I'm giving up on my custom code at least for a while and goign to use [the github one](https://github.com/akashenen/2d-platformer-controller).  I found out I had used it about 1 year ago because it was already in my downloads folder under that name ahha
	* Update: See the last few bullets first
	* Importing that package isnt instantly working because of a new input system but there are errors because it cant find it.  Maybe its my assembly definitions?  Maybe I will try it in an empty 2d project? 
	* 2019.2.11f1
	* Well It looks like some other people have had the same problem and although I figured it out on my own there are two things you need to fix: Change the import from unityengine.experimental.input to uintyengine.inputsystem (after you've imported it from teh package manager)
	* Also you have to change 'cancelled' to 'canceled' in one cs file (that will be obvious from the errors)
	* Also theres an issue with vcam in all of the scenes and I had to go back to an old version on my other PC to figure this out but theres also an issue where apparently cinemachine has to be there when you import it (Havent tried this yet)
	* As of now even after importing cinemachine none of the demo scenes worked and I'm starting to think its an input problem
	* Got it all working!  also had to add this line to the player controller awake `controls = new InputMaster();` and it all started working!
	* Lets try this in 2019.4.12f1
	* oh yeah and you have to remove the Input/InputMaster.cs once you've imported the inputsystem.
	* Actually it worked perfectly. All I did was 
		* import inputsystem and cinemachine, 
		* I said yes when it wanted me to restart to use the new input system and disable the old and restart. 
		* Then I acccepted some other warning popup 
		* Then I removed the 2D-Platformer-Controller-Master/Assets/Input/InputMaster.cs
		* Loaded the 'testing room' scene and it worked perfectly (keyboard and gamepad)
	* Its even got squishing when you land and jump!
	* Biggest possible disadvantage: 
	* Also theres a problem where you fall through the vertically moving platforms even after adjusting the rigidbody. It makes those platforms and that whole mechanic feel cheap.  Also the horizontally moving platforms you can't jump off of them in teh way you would expect and the physics are just a little weird, not broken but not familiar or great or really polished either.  
	* I feel like I would like to add [these features](https://www.youtube.com/watch?v=RPdn3r_tqcM) to this repo
	* First though I would like to fix the broken parts of the repo
	* I just found out that I should have imported the repo differently. Its obvious in hindsight that I should have overwrriten project settings adn the packages folder because in there it imports cinemachine and inputsystem for you!  And the correct versions of them too!  or at least it tries to.  But the correct versions may not be available I dont know but its cool that it tries it anyway
	* Found out by opening the project as it is in github that it was last built with 2019.1.0b10 wow when I just make a folder out of the github repo and open it as a unity project it upgrades it self to 2019.2.11f1 and ... has zero errors?  Thats wierd man.  So most of this could have been resolved much easier?  Is taht real?  Let me go download from github and try it again with 2019.4.12f1.  confirmed it worked with 2019.2.11f1 immediately.
	* One big difference is it has tons of layers that when I made it it didnt have:  Ground, OWPlatform, Ladder, Character, Box, Interactable.   Also you have to fix them in the physics config object in the demo scenes: OWPlatformMask is OWPlatform and Box, Stand On Collision Mask is Character and Box, Interactable Mask is Interactable and Box.  Interesting that as soon as I added the layers the physics config had them set properly and the ladders that I copied from the working scenes had ladder as their tag.
	* Sorting layers were gone too: Background, Ground, Default, Object, Foreground, UI
	* Physics Config Gravity is -60, Air Friction is 1, Ground Friction is 15, Stagger Speed Falloff is 50
* Ok so now since I've got the github controller working well (at least for its capabilities)
* Theres not much camera follow the way the cameras are configured.  It seems to just lurch to the next scrolled over screen
* Also there is still tearing in the tilemap (but its not as bad as before honestly).  My ghetto way of fixing it (I still dont understand why this is still a thing) is in the grid set the cell gap to -.0005 for x and y.  Update: See the workaround below for a much more elegant solution although this one absolutely seemed to work well
* The character doesnt have a sprite anymore
* Also the square collider gets pretty stuck step by step on the hill ramp. This ended up being due to the custom physics shapes needing manual adjustment in the sprite import settings
* The animation system is objecting since my animator doesnt have many of the parameters that the code is setting
* It was tricky to get the animation working since the sprite was on a different object and all of the code expected it to be on that object (and even required it).  
* Theres probably a perfect place to set the left right sprite flip but its taken me a while to find a good candidate.  I want to do it based on the animator parameter FacingRight.  Lets see if it works
	* I feel like I've got the perfect solution but it doesnt work: based on the animator parameter facing right I made a new animation layer and all that happens there is changing the flip x on the sprite renderer.  The states are being activated properly (i can see them in the animator view) but the sprite isnt flipping.  I noticed that even if I try to check the box in the inspector it doesnt flip
	* I'm going to try to make a simpler animator that just flips the sprite.  Yes that simple animator with just the one layer works.  The layer also works if you make it first in the layer list.  I had it as additive but changed it to override to test things.  When its override and first in teh layer list it works.  When its additive (even as the first layer) or after the base layer it doesn't work.
	* I got this part working: change the layer settings to Override with weight 1.
* So the squish animations stopped working when I applied them to my new character sprites.  I had to re-do them by selecting them, selecting the animation in the animation editor drop down top left, then adding the scale property and copypasting all of the keyframes over to the new sprite scaliing properties.  Then they worked.
* Making levels: According to a forum post I found mario 3 levels are 160 or 176 tiles wide (16px per tile) (aka 10-11 screens) and the longest was 208 tiles wide.  Other people are saying 200 is a pretty typical size, some say 300 but i have a feeling that would actually be enormously long
* Will need to make animations for when the player is hurt and when he falls in a hole to die
* Wall jump works instantly which is nice
* Ladders well these worked somehow in my build but when I opened the github project directly in 2019.2.11f1 and let it upgrade it had a Ladder physics layer and I dont really understand how the ladders work without that layer.  probably metadata from previous connections when the layer was there?
* Ideally the player would animate walking slower when it was moving slower.  Oh wow this feature is built into the animator!  It looks like the player only goes at one speed for some reason
* Walking to the left seems to animate real weird with a long step while walking to the right doesnt.  It just looks clumsy.  Update: Thats because the mirror checkbox got checked in the walk left animation state in the process of me figuring out how to flip the animation to the left.  Instead of flipping it it was starting at the final frame of the animation and proceeding from there.  When I unchecked that it looks perfect now.  Also the original version from the repo doesnt have that checked so its fixed now.
* Would like to add a little puff of dust to the jump and landing and the double jump
* THis super simple 2D game is making my macbook get super hot.  Is that this code or how I've got this project setup or would basically any unity 2d game do this?
* Ok lets fill out this map
* So I wanted to add ladders easier.  before I had them stretched all funny and looking weird as a result.  Now I've got a sprite object set to Draw Mode Tiled and that way I can just set how big I want it to be not in the transforms scale but in the draw mode x y setting  Easy.  You just have to add a box collider 2d and set the layer to Ladder.  NOPE This doesnt work utnil you tinker with the collider.  the collider only respects the transform scale not the sprite tiling.  Set the box collider scale to the same as the sprite tiling and it works great.
* Now when you are on the ladder the controller doesnt let you move side to side to jump off it specifically makes you jump.  I would love it if you were on teh edge of the ladder and you pushed that way if you jumped but I dont even know if there is precendent for that so I'm certainly not going to go to the trouble of programming that in.  It might even be a feature of the controller already.   I lowered the velocity and height of the jump off the ladder so it works great as is.  I had to set order in layer to -1 to get the player to show up in front of the ladder.  The ladder auto shows up in front of the tilemap but it will take some layer tweaking to get it to show up behind the tilemap.  Not sure how to do that.   
* What if there are two ladders can you move sideways?  no.  you have to make a little jump over there.  Thats ok too.  Even ifyou scale the ladder to 2x it doesnt work it just places him in teh center of the ladder.
* Theres a little bug int he controller it seems that walking onto a ladder and pushing down it kind of pauses at least when goign through another collider.  it doesnt animate and the sliding isnt smooth.  Thats only when youve got the ladder going through the ground that youre standing on. If the ladder is off ot the side of the ground then going near it facing the ladder and hit down and he instantly grabs hold and that works perfectly.  unfortunately when you're climbing up a ladder in the top of the ladder is off to the side of the ground(as it would be in this case) there's a little extra jump that Hass to happen to dismount the ladder even when visually you're standing effectively right on top of the ground.
* Double jump doesnt animate the jump frame when it jumps again.  Thats probably a limitatiion of the included animator.  I Dont really know what I did but it works now.  It looks like just by changing the length of the falling animation from .1 to 1s it works.  nope.  It only works half of hte time.  Still half the time when hes falling he just barely blinks through the jump animation.    It looks like its because of the conditions of the falling animation.  It comes from any state and if the velocity is high enough it goes right there.  That means it will interrupt even the jumps.  Looks like the falling animation had a fixed exit time and it was too long so removing that seemed to fix it.
* Twice now its just started moving left and I dontknow why.  Thats confusing.  Its not my bt keybord or controller.  Those are both visible.
* I tried to overload the up button to be a jump.  I conceptually or technically dont understand how to do that with the new input system except with a really weird and complicated sending of a jump signal with the axis to a method just for figuring out whether to jump or not.
* Another bug is when you bump your head you lose your double jump.  That doesnt make sense.  It seems t oremove ONE double jump so if you have 2 on tap then bumping your head on the bottom of a platform removes one.  
* I want a wall climb to give you back your double jump.
* How to do hidden tiles that dont have a collider?  Probably make another tilemap that just has those tiles that I want to appear that way.  Yup that worked!  I added it to sorting layer background too
* How to do background tiles?  Put them on another tilemap without a collider and with sorting order set to background
* How to do parallax scrolling?
* How to erase large sections?  Zoom way out press i, select a huge area of empty space press, d paint over everything 
* Quick jumps have some strange animation artifacts after landing
* How to do one way platforms (I suspect the OWPlatform layer but also seem to  want to specify the box layer)
* It looks like checkpoints are pretty built in but I dont know how to use them  (examples in the scenes)
* In the animator added an animation layer just for the jump squish and for the landing squish scaling.  override and weight 1 
* In the animator interesting that one of the animation parameters is vSpeed which is not velocity so falling is not going <-1 velocity its >-1 speed That tricked me up and I ended up breaking the animation jump frames completely until I figured that out.  Update: I'm not sure thats true either and it makes me question why some thiings worked.  
* Had to make a number of transitions with all checkboxes off and with just 0.1s for both duration and offset.  putting 0s in there didnt always do what I expected, nor did putting 0.5s in there.  Are you supposed to match up the times manually with how long the animation plays?  If so then if you change an animation are you supposed to go change the times in each transition to that animation?
* I found the [2d unity extras](https://github.com/Unity-Technologies/2d-extras) where they have randomized brushes and also brushes for placing prefabs and for placing animated tiles and also the one where there are rules for placing tiles next to other tiles which helps you draw things like edges and roads and lakes easily and for placing a tile that randomly gets chosen from a certain set ... maybe thats for adding decorations?
* I just noticed that in the package manager is a pixel perfect package which makes sure pixel art is crisp and clear at different resolutions and that it is stable in motion.  I wonder if that would work with the cinemachine cameras?  Probably not but this would be at least somewhat preferable.  I wonder if it comes with a pixel perfect camera follow?  I could perhaps make my own camera follow if I need to. Oh!  Its actually already installed and it IS a camera component.  Maybe I could use that with cinemachine?  lets try it!  
	* Ok it easily lets me add the component to my existing camera.  I set pixels per unit to 16 and left the reference resolution at 320x180 and pixel snapping true.  
	* The reference resolution is the resolution the pixel art was designed for.  the bigger I make that the more zoomed out the game is.   I tried doubling it and it got real zoomed out.  Even at 320x180 it was way more zoomed out than my game was 5 minutes ago.  I tried setting it to NES resolution 256x240 (which is mind bogglingly HIGHER than SNES resolution by a few pixels lol) and it was way zoomed out then too!  I set it to 128x128 and it was all zoomed in almost exactly like before I installed the camera
	* Remove the grid workaround: OK so I removed the overlap in the grid which was the workaround I had done before to fix the tearing (x: -0.0005, y: -0.0005) but now wiht pixel snapping set on the camera even without the grid overlap it doesnt tear at all!!!  Thats great and this is definitely the right solution for tearing.  
	* Lets see if it works without pixel snapping and without tearing.  No Tearing and its smoother without pixel snapping.  With pixel snapping it was just the littlest bit jerky (no different than back in the day on NES or SNES though).  
	* This is absolutely the solution to the pixel tearing.
* I want to add enemies now
	* Possibly could use [The enemy ai from this repo](https://github.com/antfarmar/Unity-2D-Platformer-Demo/blob/master/Assets/Scripts/Enemy.cs) to control my enemies, the problem is there are no shared paradigms.  Right off the bat I can see that they use tags instead of layers.  Could that be changed?  Sure!  They dont use raycasts they use collisions which means I couldnt keep them on platforms without adding extra invisible tiles on the end of each platform (which would totally work) or limiting their AI to walk straight unless they hit something which now that I think about it is all mario did anyway.  
	* Lets see if anyone has written an article about the simplicity of mario ai.
	* There are only [15 enemies in Mario](https://www.mariowiki.com/List_of_enemies_by_game#Super_Mario_Bros.) well actually that doesnt include bowser.  "[Each enemy is different from] each other](http://critical-gaming.com/blog/2009/11/28/the-measure-of-mario-pt4.html) and even the smallest difference can contribute to very different gameplay scenarios because of emergence".  Most of the enemies move at a constant speed and in a predictable pattern.  Bowser doesnt.  The hammer bros dont.  Lakitu and blooper follow the player in interesting ways.  On level 1 though there are only a few types of enemies: just 3 types I think?  
	* There are a lot of ways that the different mechanics of the level can [interplay with the enemies](http://critical-gaming.squarespace.com/blog/2008/6/18/mario-melodies-interplay-part2.html) to make emergent gameplay situations 
	* This is a good [overhead enemy AI](https://github.com/sturdyspoon/unity-movement-ai) package with gifs showing the different behaviors.  It looks easy to import and it looks modular
	* This is a cool [Fancy 3D AI](https://github.com/OneManMonkeySquad/UtilityAI) which even has a visual scripting element to it.  It looks like it could be used to plot out a bunch of pretty interesitng enemy behaviors.  The license is MIT but then at the bottom the author has a note saying its not MIT.  That doesnt work lol
	* This one has [platformer AI](https://github.com/LifeAlgorithm/2D-Platformer-Video-Game) which uses raycasts and even finds platform edges and is even a full game but has no license :(
	* Going to try to use what I've got without adding any new enemy ai.  
	* Dragged all of the opossum frames into the scene.  Addign character controller to that new game object.  It comes with character data with all 0s.  I put a speed in and it animated but the collider fell part way into the ground and didnt move.   Oh because the character controller has to be told to move haha.  obv.  I had to drag the animator into its own inspector field in the controller (that was obvious from a runtime error)  also the animator doesnt have any o fthe fields that the controller is setting so maybe I'll copy the player one ?
	* Copied the player animator and made an opossum controller script (based on the player controller with all the inputs removed) and without the script attached the possum just walks in place.  had to remove all of the respawn stuff.
	* Its mostly working but the box collider is getting plowed into the ground.  Aha its got to be kinematic.
	* Got it working! It walks left and down a hill and looks pretty good!
* Just noticed that sunnyland has a cool sprite explosion pack
* Further enemy work
	* Got the enemy walking back and forth every xs
* Now I've opened another project because I want to get the [Fantasy Trip](https://github.com/Guznat/FantasyTrip) assets working since there are a lot of potentially useful assets in there.  I open it up with the version of unity that it is apparently set ot (although its surprising to me that I had the exact version and seems unlikely that it was right) and there are 26 errors most of which are duplicate code files.  
	* I'm getting the impression there is all sorts of unlicensed stuff in here lol.  Yup.  In the repo is the entire Tenacious D song Fuck Her Gently LOL
	* I had to delete like 7/10 of the files in the script folder since they were duplicates.  Even when I do the camera has a missing script.  Even then when I try to run it it has errors and the character doesnt show.  
	* Lets try starting it from different scenes
	* There are still errors in the scene and errors when it runs.  In th scene there are missing scripts in the enemy, the camera, and the player and probably others.  
	* This is way too big of a mess.   The only reported issue is someone who had the same experience I have just had.
	* I've downloaded a previous commit so lets see if that runs better. I picked the one before a big merge (which my current suspicion is that the merge messed up the code.)  I pulled down 5 different commits and [only this one worked](https://github.com/Guznat/FantasyTrip/tree/87b47dfe862f0e238047271c83febcc015e972f2) it would let you use the android on screen controls to move aorund shoot and jump and it all felt and looked really good.  
	* Ok I downloaded the whole git repo (shouldhave done that sooner so I could surf around) and had to create new branches for each commit I wanted to check out.  Finally I found out that the one I found 87b47 was the last one that worked afaik.  
	* From that starting point it ran so I just added a few input checks to the player controller and now I can use my joystick!  it took me some time to 
	* Every time you fall into a pit you just keep falling infinitely so I added a safety net.  IT works great
	* I'm actually really digging what I'm finding here.  The controls arent perfect but they would totally work for a game and I can tweak them easily enough
	* I dont know how they actually fixed the problem of tiles tearing.  Maybe they didnt use tiles?
	* Shooting isnt working with the controller maybe theres a gun or bullet object that is signed up to the button press but not to my joystick input.  Oh theres a magic bullet that has a short range and was already configured to use fire1.
	* When you jump up through a one way platform it launches you far!  That could be a useful trick. 
	* The moving platforms work really really well.  They have a simple setup 
	* There  is like a spline curve landmass which blows my mind how they did that.
	* The enemies only have very simple movements
	* The enemies have life and so does the player.
	* For the jump jump force 40 and gravity scale .75 seem to feel right.
* Now I'm checking out the [repeater code](https://ldjam.com/events/ludum-dare/47/repeater) from ld47.  It says it uses the new input system and asks you to change it but then the code doesnt use that system.  no big deal should be a two click change in player settings then when you restart it asks you again if you want to use the new system again haha "No I just now told you not to! Thats literally the only reason I restarted".  Easy to get it working at that point. No errors or warnings (update there are 10 warnings that dont concern me(mostly namespace mods) on first load after that none).  Real nice and clean.  
	* This is a lot of code they made for this: player controller while monolithic is detailed and clear and there is a game manager and several enemy ai classes.  The level piece class is what reconfigures the level when you hit certain points.  When you hit a trigger in the center of the level (knowing that when you do the screen is smaller than the edges of the level) it instantly reconfigures the entry and exit points of the level with the configured options
	* I used 2020.1.11f1 for this.  It was using a slightly older 2020.1 
	* Tweaked some speed lives and damage values and its more fun and balanced now imho. Change the player life in the level1 scene and the enemy life in the enemy1 prefab in prefabs.  make the hp public in the blob ai script.  Its now more fun to kill the enemies but they come at you faster and you have only one extra hit you can take before you die so you have to be more careful
	* I'm putting it into git I want to make a game out of this now 
	* The only scene that matters or works is level1
	* Interesting that the bullet uses raycasts instead of a collider as its travelling
	* Fire1 is joystick button 2 Fire 2 is joystick button 1 Fire 3 is joystick button 2 Jump is joystick button 0  
		* Reconfigured so Fire 1 is 0 and 2 and jump is 1 and 3 that way on this ps4 its not only the most comfortable but also there are two options depending on what you expect
	* I got a new level partially working and then a simple one with an enless loop fully working
	* Hi!  If I dont hear back I'll probably make it public but let me know if you want me to take it down and or you want to include this new version on your page or something, obviously its your ip
		* Hi!  I loved your LD47 entry Repeater and when I was checking out the source code I realized that it might be fun to make a mod so I did!  I added a level but this mod doesnt have the original level in it so its just an alternate level of the original game.  I also changed the weapon and life balance for the player in a way that felt nice to me.  
	* When I died it switched scenes so I changed the code to go to level2
	* I made a whole new level!  I think I need to explore it a bit more to get the hang of it and make sure there arent any game breaking loops.
* Now I'm checking out [Recursive Arena](https://ldjam.com/events/ludum-dare/47/recurcive-arena) which came in 17th.  
	* It didnt work with my 2019.3 install because I had deleted it haha.  It still somehow sort of loaded though which was weird.  
	* Now it seems to work and the code is interesting.  Theres more actual code than I'm used to and in short non verbose statements with lots of math and commands and short variable names and stuff.  It uses cinemachine, timeline, and post processing volume (although I can't see the post processing at all I'm sure its there).  The timeline in particular for the camera shake.  Oh the post procesing is used during hte rewind at least and probalyth eglitch and the intro of the new player.
	* The rewind is so clever: evaluate over an animationcurve (5-timer)/5 and thats the speed.  then timer -= deltatime*speed and stop when it gets less than zero.  
	* This even has a state machine for a tutorial!
* Now I'm checking out [Cursed Temple](https://ldjam.com/events/ludum-dare/47/cursed-temple) and they zipped the library folder too so it was a huge unpack and download.  now there are two copies of the nextlevel.cs in the assets folder so theres an error.  It has a great feeling physics jump and double jump player controller.  Great graphics and animations. also I dont know how they did all that cool stuff with the record and stuff.  Some of the assets like the teleporter looks like they are transparnet pngs from google which seems to be against the rules of hte compo.  There are tons of frames of animation for the character like 16 per action.  The background seems to have been painted from the parts kidn of like a tilemap with different darkness colors or seomthing.  I think I could do something like that someday.  The tiles used to make the levels are really cool high res tiles with different grasses and also with vines and lots of plants and several possible frames.  I think they did great with these tiles.  Theres an animator just for the title to make it grow and pulse and feel alive. I like how little code there is here.  The player controller is 2nd longest file and its very short for a nice double jump physics feel.  The timeline.cs is the longest and I'm not sure what it does but I suspect it is a manager of the whole game to move from one state to the next or from one level to the next.  Oh the timeline is the movement recording feature.  The repeater code I looked at above is so much more complicated than this.  That code has AI and projectiles and step sounds and things but its kind of amazing how much harder to read and understand that code is than this.  this is great simple code
* As I was trying to get githubs working I found out that when it says "updated x days ago" at the top its not always right because its only focused on the selected branch.  If people have been working in another branch every day but the master branch is several years old then the whole repo will look several years old.
* Now I'm trying [JCSUnity](https://github.com/jcs090218/JCSUnity) which was 2020.1.3f1 and I'm loading it in 11f1.  it says that none of the assets are usable in commercial projects just the scripts.  but the scripts are MIT.  The only warnings are extra meta files. Wow there are a lot of demo scenes.  There are a few missing scripts like in logview reported in the positioncast scene.  there are kind of a lot of missing scripts on files actually.  Also all of the audio listeners are broken so thats a constant error in every scene.  It looks like the demo scenes are pretty shitty unless I'm missing something but that doesnt mean that the code is bad.  
* Trying some dungeon generators [Unity Dungeon Generator](https://github.com/damarindra/Unity-Dungeon-Generator) this one just doesnt work which is weird.  Now I'm trying this one [Unity Procedural 2D Map](https://github.com/CCGLP/UnityProcedural2DMap)  This one works great instantly.  Theres branch quantity (which is how many random branches off of the main lines) branch longitude (which is how long they are) I think this would make some cool underground platformer levels or at least starting points.  they would have branching paths and you would have to explore but it wouldn't be like a maze, there would be a few dead ends but there could be like secrets in teh dead ends and stuff, but thats part of exploration and mostly you just have to find your way.  Theres no way to generate the maps though ... I wonder ... They kind of remind me of parts of the SOTN castle or dungeons between.   Then I tried [Unity Polygon Map Generator](https://github.com/harmjs/unity-polygon-map-generator)  Open the test scene and it starts up in 2d mode.  Click on the 2d button at the top of the scene view and it goes 3d.   Its cool because all of the meshes are apparently stored in the scene (I guess) but they are all independent meshes.  Thtas not necessarily great but it works.  The way it does it they are at one of two vertical levels.  I wonder if I can make them like mountains and valleys.  I dont know if th esettings are different here but I'm having trouble navigating the sceneview for some reason.  I tried changing smoothing steps to 1 or 10 and I lost even those two layers of depth. One huge inspector problem is even while its not running it instantly evaluates your changes so if the value is 100 and you want to go to 23 you backspace over the 0 and it fires off a calculation of 10.  Editing the octaves field brings back the 2d.  Oh at least you can turn off auto update.  I got the [Space Sandbox](https://github.com/arjolpanci/SpaceSandbox) but it isnt a complete unity project and I couldnt get it running.  it looks freaking amazing and will be sad to abandon because it could be so damn cool.  I'm getting the [Taurus Dungeon Generator](https://github.com/SolAnna7/TaurusDungeonGenerator) This looks really advanced but if you have to define the configs from scratch then I dont feel motivated to do that although it could be useful in the future.  Theres an 'example project'  Theres a fatal error trying to clone the git git@github.com: Permission denied (publickey).  But even download zip doesnt give enough to open the unity project.  Hmm the example project seem sto come with something called super unity build.  wonder what that is???  Wow its one of those asset store $50 assets that I almost bought!  This one works based on preconstructed prefabs and optional doors which makes sense to my brain.  I dont know where the prefabs are defined though.  Ok good news there is documentation on the github and it says it uses the MIT Pisces config loader which reads yaml so this is how the prefabs are defined.  This looks like way way too complicated to try to get working from scratch but it makes some cool dungeons as is.  Imho this is vastly overengineered and complicated.  I stiill cant figure out how the code finds the room prefabs.  They aren't connected in the scene and I dont see any like yaml.  Now I'm going to try this [Moolt Level Generator](https://github.com/Moolt/LevelGenerator/tree/master/) Bring it up in 2018.3 when it was made in 2018.2 and it has 1 array error having to do with tags.  Theres no prepopulated scene but dragging a bunch of the 'chunks' does generate somethign when I hit run its kind of an abomination though. update: Actually it made a cool level instantly with just a few glitchy parts.  Wow!  And it comes with the standard assets fps controller so you can poke arund.  
	* There are a bunch of level generation windows that are available now and when live you can regen and adjust and then save!  When you first hit run its kind of got two maps so they overlap and thats kind of a problem but if you delete the first few objects then its consistent.   Theres a [great video](https://www.youtube.com/watch?v=P2rAnXnNdSI) about using it.  10 min.  this was made for a thesis.  Now that video actually shows making a chunk resizing it, then adding a door and moving it instantly to another wall just buy clicking on a widget.  this is some advanced usage of the unity editor.  I made some doors and ramps in a room and then decided to move on for now but this is a winner. 
	* Now I'm trying [DungeonTemplateLibraryUnity](https://github.com/sitRyo/DungeonTemplateLibraryUnity/tree/v2018.1.3) and loading it up in 2018.3 none of the scenes do anything at all.  Same in 2017.4 they have lots of demos and no errors but they just dont do anything . OMG the roguelike one works perfectly and looks AMAZING!  Simple Roguelike works great too!  Update: The PerlinIsland not only works if you just create a new terrain in the scene but it is fucking awesome!  SimpleVoroni doesnt work or manybe it does.  Random vor and random rect all three of those seem to just output to ascii their randomized terrains in ascii. Perlin Solitary Island: add a new terrain and boom.  Nope Actually even though it had a terrain in the scene it seems ot only go to text too.  OH! It loosk like there might have to be a script on the corresponding terrain.  Fractal Island works! you have to have a terrain with generatefractalislandterrain attached and then it has to have a unique terrain data in 2 places in the terrain inspector (so you have to make a terrain, rename that new terrain so you can tell it apart and then drag and drop the new terrain in to the slots)  Then you can actually adjust the terrain yourself!.  Have to turn off lighting autogenerate or you cant get any shit done at all.  GOt perlin solitary working.  Diamond Square Average Island works!  and diamondsquareaveragecorner works!
	
	
	
	
https://clips.twitch.tv/RenownedCourageousSrirachaTBTacoLeft

# Making a 2D.5 Platformer in Unity #

1. I had great success today 11/16/2020 I got collectables working great
	* note: when i was colliding I was get component the audio source and then play.  Turns out that takes an audibly significant amount of time and if you cache it on start then it plays instantly.  Before it was playing .6s later or so like super obviously after
	* using my collectable system it already works with the score

